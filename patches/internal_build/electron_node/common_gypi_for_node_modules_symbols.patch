From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Tomas Rycl <torycl@microsoft.com>
Date: Tue, 21 Jan 2020 14:24:22 +0100
Subject: modified common.gypi to turn on building node modules with symbols

Microsoft patch

diff --git a/common.gypi b/common.gypi
index 0a10a734d48e0b45b0ed4502927616e46633dafb..5849cc9384ff5acd81ea350a8af724e3611ae534 100644
--- a/common.gypi
+++ b/common.gypi
@@ -29,6 +29,8 @@
 
     'openssl_fips%': '',
 
+    'generate_debug_symbols%': 'false',
+
     # Don't use ICU data file (icudtl.dat) from V8, we use our own.
     'icu_use_data_file_flag%': 0,
 
@@ -421,6 +423,9 @@
           }],
         ],
         'conditions': [
+          [ 'generate_debug_symbols=="true"', {
+            'cflags_cc': [ '-g' ],
+          }],
           [ 'target_arch=="ia32"', {
             'cflags': [ '-m32' ],
             'ldflags': [ '-m32' ],
@@ -548,6 +553,12 @@
               'CLANG_CXX_LIBRARY': 'libc++',
             },
           }],
+          ['generate_debug_symbols=="true"', {
+            'xcode_settings': {
+              'GCC_GENERATE_DEBUGGING_SYMBOLS': 'YES',
+              'DEBUG_INFORMATION_FORMAT': 'dwarf-with-dsym'
+            }
+          }],
         ],
       }],
       ['OS=="freebsd" and node_use_dtrace=="true"', {
